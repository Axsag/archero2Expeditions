<!-- Trigger Button (optional) -->
<img
  src="assets/icon_zhanji.png"
  alt="Show Players"
  class="icon-open-pl-mod"
  (click)="openModal()"
/>

<div class="lane-summary-wrapper" *ngIf="!showModal">
  <div class="lane-summary-container">
    <div class="lane-summary-box" *ngFor="let lane of lanes"
         (click)="openModal(lane)">
      <div class="lane-title">{{ laneNames[lane] }}</div>
      <div class="lane-players">
        <img src="assets/icon_friend.png" alt="Power Icon" class="icon-power" />
        <span>{{ getLanePlayerCount(lane) }}</span>
      </div>
      <div class="lane-power">
        <img src="assets/icon_power.png" alt="Power Icon" class="icon-power" />
        <span>{{ getLaneTotalPower(lane) }}K</span>
      </div>
    </div>
  </div>
</div>

<!-- Modal Overlay -->
<div class="modal-backdrop" *ngIf="showModal" (click)="closeModal()"></div>

<!-- Modal Window -->
<div class="modal" *ngIf="showModal">
  <!-- Header -->
  <div class="modal-header">
    <div class="add-player-overlay" *ngIf="showAddPlayerForm">
      <div class="add-player-box">
        <input type="text" [(ngModel)]="newPlayerName" placeholder="Name" />
        <input type="number" [(ngModel)]="newPlayerPower" placeholder="Power (K)" />
        <div class="form-buttons">
          <img src="assets/Btn_S_Blue+.png" alt="Add" (click)="confirmAddPlayer()" />
          <img src="assets/Btn_S_Red_No.png" alt="Cancel" (click)="toggleAddPlayerForm()" />
        </div>
      </div>
    </div>
    <img
      src="assets/Btn_S_Blue+.png"
      alt="Add Player"
      class="icon-button"
      (click)="toggleAddPlayerForm()"
    />
    <img
      src="assets/Btn_Close_Pop.png"
      alt="Close"
      class="icon-button close-icon"
      (click)="closeModal()"
    />
  </div>

  <!-- Lane Filter -->
  <div class="lane-filter">
    <img
      *ngFor="let lane of allLanes"
      [src]="'assets/Btn_S_' + lane + '.png'"
      alt="Filter Lane"
      [class.selected]="selectedFilterLane === lane"
      (click)="selectFilterLane(lane)"
    />
  </div>

  <!-- Filtered Player List -->
  <div class="players">
    <div *ngFor="let player of filteredPlayers" class="player-row" [class.top8]="isTop8(player)">
      <div class="player-info">
        <span class="name">{{ player.name }}</span>
        <span class="power">
            {{ player.power }}K
            <img src="assets/icon_power.png" alt="Power Icon" class="icon-power" />
      </span>
      </div>
      <div class="lane-buttons">
        <img
          *ngFor="let lane of lanes"
          [src]="'assets/Btn_S_' + lane + '.png'"
          alt="Lane Icon"
          class="lane-icon"
          [class.selected]="player.lane === lane"
          (click)="assignLane(player, lane)"
        />
        <img
          src="assets/Btn_S_Red_No.png"
          alt="Delete Player"
          class="icon-button delete-icon"
          (click)="deletePlayer(player)"
        />
      </div>
    </div>
  </div>

</div>
